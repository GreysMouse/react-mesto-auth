(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(20),i=n.n(c),s=n(8),r=(n(27),n(22)),u=n(2),l=n(3),d=o.a.createContext(),p=n(0);var h=function(e){var t=o.a.useContext(d);return Object(p.jsx)(l.b,{children:t?e.children:Object(p.jsx)(l.a,{to:"/sign-in"})})};var _=function(e){return Object(p.jsxs)("div",{className:"auth__container",children:[Object(p.jsx)("h2",{className:"auth__header",children:e.header}),Object(p.jsxs)("form",{className:"auth__form",onSubmit:e.onSubmit,noValidate:!0,children:[e.children,Object(p.jsx)("button",{className:"auth__button ".concat(e.isFormInvalid?"auth__button_disabled":""),type:"submit",disabled:e.isFormInvalid||e.isLoading,children:e.isLoading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":e.buttonText})]})]})};var j=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=o.a.useState(""),r=Object(u.a)(i,2),l=r[0],d=r[1],h=o.a.useState(!1),j=Object(u.a)(h,2),b=j[0],f=j[1],m=o.a.useState(!1),O=Object(u.a)(m,2),v=O[0],g=O[1],x=o.a.useState(""),k=Object(u.a)(x,2),C=k[0],N=k[1],y=o.a.useState(""),S=Object(u.a)(y,2),A=S[0],L=S[1],I=o.a.useState(!0),U=Object(u.a)(I,2),R=U[0],T=U[1];return o.a.useEffect((function(){T(!b||!v)}),[b,v]),Object(p.jsxs)("main",{className:"auth",children:[Object(p.jsxs)(_,{header:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",isFormInvalid:R,onSubmit:function(t){t.preventDefault(),c(""),d(""),f(!1),g(!1),e.onRegister({email:a,password:l})},isLoading:e.isLoading,children:[Object(p.jsx)("input",{className:"auth__input auth__input_content_email",type:"email",value:a||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,o=t.validationMessage;c(n),f(a),N(o)},placeholder:"Email",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"auth__input-error ".concat(b?"":"auth__input-error_visible"),children:C}),Object(p.jsx)("input",{className:"auth__input auth__input_content_password",type:"password",value:l||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,o=t.validationMessage;d(n),g(a),L(o)},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",minLength:"6",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"auth__input-error ".concat(v?"":"auth__input-error_visible"),children:A})]}),Object(p.jsx)(s.b,{className:"auth__redirect-link",to:"/sign-in",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})};var b=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=o.a.useState(""),s=Object(u.a)(i,2),r=s[0],l=s[1],d=o.a.useState(!1),h=Object(u.a)(d,2),j=h[0],b=h[1],f=o.a.useState(!1),m=Object(u.a)(f,2),O=m[0],v=m[1];return Object(p.jsx)("main",{className:"auth",children:Object(p.jsxs)(_,{header:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(t){return t.preventDefault(),""===a?b(!0):(b(!1),""===r?v(!0):(v(!1),void e.handleLogin({email:a,password:r})))},isLoading:e.isLoading,children:[Object(p.jsx)("input",{className:"auth__input auth__input_content_email",type:"email",value:a||"",onChange:function(e){c(e.target.value)},placeholder:"Email",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"auth__input-error ".concat(j?"auth__input-error_visible":""),children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435"}),Object(p.jsx)("input",{className:"auth__input auth__input_content_password",type:"password",value:r||"",onChange:function(e){l(e.target.value)},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"auth__input-error ".concat(O?"auth__input-error_visible":""),children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435"})]})})};var f=function(e){return Object(p.jsxs)("div",{className:"menu ".concat("mobile"===e.mode?e.userInfo&&e.isMenuOpen?"menu__mode_mobile":"menu_hidden":e.userInfo?"menu__mode_desktop":""),children:[Object(p.jsx)("p",{className:"menu__info ".concat("mobile"===e.mode?"menu__info_mode_mobile":""),children:e.userInfo?e.userInfo.email:""}),Object(p.jsx)(s.b,{className:"menu__link ".concat(e.userInfo?"menu__link_color_grey":""," ").concat("mobile"===e.mode?"menu__link_mode_mobile":""),to:e.redirectLink,onClick:e.onRedirect,children:e.redirectText})]})};var m=function(e){return Object(p.jsxs)("header",{className:"header page__header ".concat(e.userInfo?"header_mode_mobile":""),children:[Object(p.jsx)(f,{mode:"mobile",redirectLink:e.redirectLink,redirectText:e.redirectText,onRedirect:e.onRedirect,userInfo:e.userInfo,isMenuOpen:e.isMenuOpen}),Object(p.jsx)(s.b,{className:"header__logo",to:"/"}),Object(p.jsx)(f,{mode:"desktop",redirectLink:e.redirectLink,redirectText:e.redirectText,onRedirect:e.onRedirect,userInfo:e.userInfo}),e.userInfo&&Object(p.jsx)("button",{className:"header__menu-button ".concat(e.isMenuOpen?"header__menu-button_state_pressed":""),type:"button",onClick:e.onMenuOpen})]})},O=o.a.createContext();var v=function(e){var t=o.a.useContext(O),n=e.card.likes.some((function(e){return e._id===t._id}));return Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("img",{className:"card__image",src:e.card.link,alt:e.card.name,onClick:function(){e.onCardClick(e.card)}}),Object(p.jsxs)("div",{className:"card__content",children:[Object(p.jsx)("h2",{className:"card__title",children:e.card.name}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{className:"card__like-button ".concat(n?"card__like-button_checked":""),type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",onClick:function(){e.onCardLike(e.card)}}),Object(p.jsx)("p",{className:"card__like-counter",children:e.card.likes.length})]})]}),Object(p.jsx)("button",{className:"card__delete-button ".concat(t._id===e.card.owner._id?"":"card__delete-button_hidden"),type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(){e.onCardDelete(e.card)}})]})};var g=function(e){var t=o.a.useContext(O);return Object(p.jsxs)("main",{className:"content page__content",children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsx)("div",{className:"profile__overlay",onClick:e.onEditAvatar,children:Object(p.jsx)("img",{className:"profile__avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"})}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsx)("h1",{className:"profile__name",children:t.name}),Object(p.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:e.onEditProfile}),Object(p.jsx)("p",{className:"profile__description",children:t.about})]}),Object(p.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:e.onAddPlace})]}),Object(p.jsx)("section",{className:"cards","aria-label":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043c\u0435\u0441\u0442",children:Object(p.jsxs)("ul",{className:"cards__container",children:[e.cards.map((function(t){return Object(p.jsx)("li",{children:Object(p.jsx)(v,{card:t,onCardClick:e.onOpenCard,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})},t._id)})),";"]})})]})};var x=function(){var e=(new Date).getFullYear();return Object(p.jsx)("footer",{className:"footer page__footer",children:Object(p.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})};var k=function(e){var t,n,a;return Object(p.jsx)("div",{className:"popup popup_mode_image ".concat(e.isOpen?"popup_opened":""),children:Object(p.jsxs)("div",{className:"popup__place-container",children:[Object(p.jsxs)("figure",{className:"popup__place",children:[Object(p.jsx)("img",{className:"popup__place-image",src:(null===(t=e.card)||void 0===t?void 0:t.link)||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY/j//z8ABf4C/qc1gYQAAAAASUVORK5CYII=",alt:(null===(n=e.card)||void 0===n?void 0:n.caption)||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430"}),Object(p.jsx)("figcaption",{className:"popup__place-caption",children:(null===(a=e.card)||void 0===a?void 0:a.caption)||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430"})]}),Object(p.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})]})})};var C=function(e){return Object(p.jsx)("div",{className:"popup ".concat(e.isOpen?"popup_opened":""),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsx)("h2",{className:"popup__header",children:e.header}),Object(p.jsxs)("form",{className:"popup__form",onSubmit:e.onSubmit,noValidate:!0,children:[e.children,Object(p.jsx)("button",{className:"popup__button ".concat(e.isFormInvalid?"popup__button_disabled":""),type:"submit",disabled:e.isFormInvalid||e.isLoading,children:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":e.buttonText})]}),Object(p.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})]})})};var N=function(e){var t=o.a.useContext(O),n=o.a.useState(""),a=Object(u.a)(n,2),c=a[0],i=a[1],s=o.a.useState(""),r=Object(u.a)(s,2),l=r[0],d=r[1],h=o.a.useState(!0),_=Object(u.a)(h,2),j=_[0],b=_[1],f=o.a.useState(!0),m=Object(u.a)(f,2),v=m[0],g=m[1],x=o.a.useState(""),k=Object(u.a)(x,2),N=k[0],y=k[1],S=o.a.useState(""),A=Object(u.a)(S,2),L=A[0],I=A[1],U=o.a.useState(!1),R=Object(u.a)(U,2),T=R[0],E=R[1];return o.a.useEffect((function(){i(t.name),d(t.about),b(!0),g(!0),y(""),I("")}),[e.isOpen,t]),o.a.useEffect((function(){E(!j||!v)}),[j,v]),Object(p.jsxs)(C,{header:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isFormInvalid:T,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c,description:l})},isLoading:e.isLoading,children:[Object(p.jsx)("input",{className:"popup__input popup__input_content_name",type:"text",value:c||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,o=t.validationMessage;i(n),b(a),y(o)},placeholder:"\u0418\u043c\u044f",minLength:"2",maxLength:"40",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"popup__input-error ".concat(j?"":"popup__input-error_visible"),children:N}),Object(p.jsx)("input",{className:"popup__input popup__input_content_description",type:"text",value:l||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,o=t.validationMessage;d(n),g(a),I(o)},placeholder:"\u041e \u0441\u0435\u0431\u0435",minLength:"2",maxLength:"200",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"popup__input-error ".concat(v?"":"popup__input-error_visible"),children:L})]})};var y=function(e){var t=o.a.useRef(),n=o.a.useState(!1),a=Object(u.a)(n,2),c=a[0],i=a[1],s=o.a.useState(""),r=Object(u.a)(s,2),l=r[0],d=r[1],h=o.a.useState(!0),_=Object(u.a)(h,2),j=_[0],b=_[1];return o.a.useEffect((function(){t.current.value="",i(!0),d(""),b(!0)}),[e.isOpen]),Object(p.jsxs)(C,{header:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isFormInvalid:j,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatarLink:t.current.value})},isLoading:e.isLoading,children:[Object(p.jsx)("input",{className:"popup__input popup__input_content_avatar",type:"url",ref:t,onChange:function(e){var t=e.target,n=t.validity.valid,a=t.validationMessage;i(n),d(a),b(!n)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"popup__input-error ".concat(c?"":"popup__input-error_visible"),children:l})]})};var S=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=o.a.useState(""),s=Object(u.a)(i,2),r=s[0],l=s[1],d=o.a.useState(!1),h=Object(u.a)(d,2),_=h[0],j=h[1],b=o.a.useState(!1),f=Object(u.a)(b,2),m=f[0],O=f[1],v=o.a.useState(""),g=Object(u.a)(v,2),x=g[0],k=g[1],N=o.a.useState(""),y=Object(u.a)(N,2),S=y[0],A=y[1],L=o.a.useState(!0),I=Object(u.a)(L,2),U=I[0],R=I[1];return o.a.useEffect((function(){c(""),l(""),j(!1),O(!1),k(""),A("")}),[e.isOpen]),o.a.useEffect((function(){R(!_||!m)}),[_,m]),Object(p.jsxs)(C,{header:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isFormInvalid:U,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({title:a,link:r})},isLoading:e.isLoading,children:[Object(p.jsx)("input",{className:"popup__input popup__input_content_title",type:"text",value:a||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,o=t.validationMessage;c(n),j(a),k(o)},placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"popup__input-error ".concat(_?"":"popup__input-error_visible"),children:x}),Object(p.jsx)("input",{className:"popup__input popup__input_content_link",type:"url",value:r||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,o=t.validationMessage;l(n),O(a),A(o)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",autoComplete:"off",required:!0}),Object(p.jsx)("span",{className:"popup__input-error ".concat(m?"":"popup__input-error_visible"),children:S})]})};var A=function(e){return Object(p.jsx)("div",{className:"popup ".concat(e.isOpen?"popup_opened":""),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsx)("div",{className:"popup__image ".concat(e.isRegistered?"popup__image_type_success":"popup__image_type_failed")}),Object(p.jsx)("h2",{className:"popup__header popup__header_mode_info",children:e.isRegistered?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}),Object(p.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})]})})},L=n(13),I=n(14),U=new(function(){function e(t){Object(L.a)(this,e),this._baseUrl=t.baseUrl,this._cohort=t.cohort,this._token=t.token}return Object(I.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/users/me"),{method:"GET",headers:{authorization:this._token,"content-type":"application/json"}}).then(this._checkResponse)}},{key:"updateProfile",value:function(e,t){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"content-type":"application/json"},body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"content-type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/cards"),{method:"GET",headers:{authorization:this._token,"content-type":"application/json"}}).then(this._checkResponse)}},{key:"addCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._token,"content-type":"application/json"},body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"content-type":"application/json"}}).then(this._checkResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/cards/likes/").concat(e),{method:t,headers:{authorization:this._token,"content-type":"application/json"}}).then(this._checkResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1",cohort:"cohort-21",token:"e0650d2e-cc1d-4b7b-999a-f7cf471dfca5"}),R=new(function(){function e(t){Object(L.a)(this,e),this._baseUrl=t.baseUrl}return Object(I.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"register",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this._baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:t})}).then(this._checkResponse)}},{key:"authorize",value:function(e){var t=e.password,n=e.email;return fetch("".concat(this._baseUrl,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:n})}).then(this._checkResponse)}},{key:"getContent",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(this._checkResponse)}}]),e}())({baseUrl:"https://auth.nomoreparties.co"});var T=function(){var e=o.a.useState(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=o.a.useState(!1),i=Object(u.a)(c,2),s=i[0],_=i[1],f=o.a.useState({}),v=Object(u.a)(f,2),C=v[0],L=v[1],I=o.a.useState(!1),T=Object(u.a)(I,2),E=T[0],w=T[1],P=o.a.useState(!1),M=Object(u.a)(P,2),D=M[0],q=M[1],z=o.a.useState(!1),F=Object(u.a)(z,2),B=F[0],J=F[1],Q=o.a.useState(!1),G=Object(u.a)(Q,2),V=G[0],Y=G[1],H=o.a.useState(!1),K=Object(u.a)(H,2),X=K[0],Z=K[1],W=o.a.useState({}),$=Object(u.a)(W,2),ee=$[0],te=$[1],ne=o.a.useState([]),ae=Object(u.a)(ne,2),oe=ae[0],ce=ae[1],ie=o.a.useState(!1),se=Object(u.a)(ie,2),re=se[0],ue=se[1],le=o.a.useState({}),de=Object(u.a)(le,2),pe=de[0],he=de[1],_e=o.a.useState(!1),je=Object(u.a)(_e,2),be=je[0],fe=je[1],me=Object(l.g)();function Oe(){q(!1),J(!1),Y(!1),Z(!1),ue(!1),he({})}return o.a.useEffect((function(){var e=localStorage.getItem("token");return e&&R.getContent(e).then((function(e){L({email:e.data.email}),_(!0),me.push("/"),console.log("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."))})),function(){return L({})}}),[me]),o.a.useEffect((function(){return U.getInitialCards().then((function(e){ce(e),console.log("\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b!")})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430."))})),function(){return ce([])}}),[]),o.a.useEffect((function(){return U.getUserInfo().then((function(e){te(e),console.log("\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b!")})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u0440\u043e\u0444\u0438\u043b\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430."))})),function(){te({})}}),[]),Object(p.jsx)(O.Provider,{value:ee,children:Object(p.jsx)(d.Provider,{value:s,children:Object(p.jsx)("div",{className:"page",children:Object(p.jsxs)("div",{className:"page__container",children:[Object(p.jsxs)(l.d,{children:[Object(p.jsxs)(l.b,{path:"/sign-up",children:[Object(p.jsx)(m,{redirectLink:"/sign-in",redirectText:"\u0412\u043e\u0439\u0442\u0438"}),Object(p.jsx)(j,{onRegister:function(e){var t=e.email,n=e.password;fe(!0),R.register({email:t,password:n}).then((function(e){a(!0),me.push("/sign-in"),console.log("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442.")})).catch((function(e){a(!1),console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."))})).finally((function(){Z(!0),fe(!1)}))},isLoading:be})]}),Object(p.jsxs)(l.b,{path:"/sign-in",children:[Object(p.jsx)(m,{redirectLink:"/sign-up",redirectText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(b,{handleLogin:function(e){var t=e.email,n=e.password;fe(!0),R.authorize({email:t,password:n}).then((function(e){L({email:t}),_(!0),me.push("/"),localStorage.setItem("token",e.token),console.log("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."))})).finally((function(){fe(!1)}))},isLoading:be})]}),Object(p.jsxs)(h,{path:"/",children:[Object(p.jsx)(m,{redirectLink:"/",redirectText:"\u0412\u044b\u0439\u0442\u0438",onRedirect:function(){_(!1),localStorage.removeItem("token")},userInfo:C,isMenuOpen:E,onMenuOpen:function(){w((function(e){return!e}))}}),Object(p.jsx)(g,{onEditAvatar:function(){q(!0)},onEditProfile:function(){J(!0)},onAddPlace:function(){Y(!0)},onOpenCard:function(e){ue(!0),he({caption:e.name,link:e.link})},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ee._id}));U.changeLikeCardStatus(e._id,t?"DELETE":"PUT").then((function(t){ce((function(n){return n.map((function(n){return n._id===e._id?t:n}))})),console.log("\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043b\u0430\u0439\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e!")})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043b\u0430\u0439\u043a\u0430."))}))},onCardDelete:function(e){U.deleteCard(e._id).then((function(t){ce((function(t){return t.filter((function(t){return t._id!==e._id}))})),console.log("\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!")})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430."))}))},cards:oe}),Object(p.jsx)(x,{})]})]}),Object(p.jsx)(y,{isOpen:D,onClose:Oe,onUpdateAvatar:function(e){var t=e.avatarLink;fe(!0),U.updateAvatar(t).then((function(e){te(e),console.log("\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!"),Oe()})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440."))})).finally((function(){fe(!1)}))},isLoading:be}),Object(p.jsx)(N,{isOpen:B,onClose:Oe,onUpdateUser:function(e){var t=e.name,n=e.description;fe(!0),U.updateProfile(t,n).then((function(e){te(e),console.log("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!"),Oe()})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c."))})).finally((function(){fe(!1)}))},isLoading:be}),Object(p.jsx)(S,{isOpen:V,onClose:Oe,onAddPlace:function(e){var t=e.title,n=e.link;fe(!0),U.addCard(t,n).then((function(e){ce([e].concat(Object(r.a)(oe))),console.log("\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430!"),Oe()})).catch((function(e){console.log("".concat(e,". \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443."))})).finally((function(){fe(!1)}))},isLoading:be}),Object(p.jsx)(k,{card:pe,isOpen:re,onClose:Oe}),Object(p.jsx)(A,{isOpen:X,onClose:Oe,isRegistered:n})]})})})})};i.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(s.a,{children:Object(p.jsx)(T,{})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.bf969489.chunk.js.map