{"version":3,"sources":["contexts/IsLoggedInContext.js","components/ProtectedRoute.js","components/AuthForm.js","components/Register.js","components/Login.js","components/Menu.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","images/image-empty.png","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoToolTipPopup.js","utils/api.js","utils/authApi.js","components/App.js","index.js"],"names":["IsLoggedInContext","React","createContext","ProtectedRoute","props","isLoggedIn","useContext","children","to","AuthForm","className","header","onSubmit","noValidate","isFormInvalid","type","disabled","isLoading","buttonText","Register","useState","email","setEmail","password","setPassword","isValidEmail","setIsValidEmail","isValidPassword","setIsValidPassword","emailValdationMessage","setEmailValdationMessage","passwordValdationMessage","setPasswordValdationMessage","setIsFormInvalid","useEffect","evt","preventDefault","onRegister","value","onChange","target","valid","validity","validationMessage","placeholder","autoComplete","required","minLength","Login","isEmptyEmail","setIsEmptyEmail","isEmptyPassword","setIsEmptyPassword","handleLogin","Menu","mode","userInfo","isMenuOpen","redirectLink","onClick","onRedirect","redirectText","Header","onMenuOpen","CurrentUserContext","Card","currentUser","isLiked","card","likes","some","liked","_id","src","link","alt","name","onCardClick","aria-label","onCardLike","length","owner","onCardDelete","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","onOpenCard","Footer","currentYear","Date","getFullYear","ImagePopup","isOpen","caption","onClose","PopupWithForm","EditProfilePopup","setName","description","setDescription","isValidName","setIsValidName","isValidDescription","setIsValidDescription","nameValdationMessage","setNameValdationMessage","descriptionValdationMessage","setDescriptionValdationMessage","onUpdateUser","maxLength","EditAvatarPopup","inputRef","useRef","isValidLink","setIsValidLink","linkValdationMessage","setLinkValdationMessage","current","onUpdateAvatar","avatarLink","ref","AddPlacePopup","title","setTitle","setLink","isValidTitle","setIsValidTitle","titleValdationMessage","setTitleValdationMessage","InfoToolTipPopup","isRegistered","api","options","this","_baseUrl","baseUrl","_cohort","cohort","_token","token","res","ok","json","Promise","reject","status","fetch","method","headers","authorization","then","_checkResponse","body","JSON","stringify","cardId","authApi","App","setIsRegistered","setIsLoggedIn","setUserInfo","setIsMenuOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoToolTipPopupOpen","setIsInfoToolTipPopupOpen","setCurrentUser","setCards","isCardSelected","setIsCardSelected","selectedCard","setSelectedCard","setIsLoading","history","useHistory","closeAllPopups","localStorage","getItem","getContent","user","data","push","console","log","catch","err","getInitialCards","getUserInfo","Provider","path","register","finally","authorize","setItem","removeItem","changeLikeCardStatus","updatedCard","c","deleteCard","message","filter","updateAvatar","updatedUser","updateProfile","addCard","params","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bf969489.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst IsLoggedInContext = React.createContext();\r\n\r\nexport default IsLoggedInContext;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport IsLoggedInContext from '../contexts/IsLoggedInContext';\r\n\r\nfunction ProtectedRoute(props) {\r\n  const isLoggedIn = React.useContext(IsLoggedInContext);\r\n\r\n  return (\r\n    <Route>\r\n      {isLoggedIn ? props.children : <Redirect to=\"/sign-in\" />}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;","function AuthForm(props) {\r\n  return (\r\n    <div className=\"auth__container\">\r\n      <h2 className=\"auth__header\">{props.header}</h2>\r\n      <form className=\"auth__form\" onSubmit={props.onSubmit} noValidate>\r\n        {props.children}\r\n        <button\r\n          className={`auth__button ${props.isFormInvalid ? 'auth__button_disabled' : ''}`}\r\n          type=\"submit\"\r\n          disabled={props.isFormInvalid || props.isLoading}\r\n        >\r\n          {props.isLoading ? 'Загрузка...' : props.buttonText}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AuthForm;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport AuthForm from './AuthForm';\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const [isValidEmail, setIsValidEmail] = React.useState(false);\r\n  const [isValidPassword, setIsValidPassword] = React.useState(false);\r\n\r\n  const [emailValdationMessage, setEmailValdationMessage] = React.useState('');\r\n  const [passwordValdationMessage, setPasswordValdationMessage] = React.useState('');\r\n\r\n  const [isFormInvalid, setIsFormInvalid] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    !isValidEmail || !isValidPassword ? setIsFormInvalid(true) : setIsFormInvalid(false);\r\n  }, [isValidEmail, isValidPassword]);\r\n\r\n  function handleEmailInput(evt) {\r\n    const {value, validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setEmail(value);\r\n\r\n    setIsValidEmail(valid);\r\n    setEmailValdationMessage(validationMessage);\r\n  }\r\n\r\n  function handlePasswordInput(evt) {\r\n    const {value, validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setPassword(value);\r\n\r\n    setIsValidPassword(valid);\r\n    setPasswordValdationMessage(validationMessage);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    setEmail('');\r\n    setPassword('');\r\n    \r\n    setIsValidEmail(false);\r\n    setIsValidPassword(false);\r\n\r\n    props.onRegister({\r\n      email: email,\r\n      password: password\r\n    });\r\n  }\r\n\r\n  return (\r\n    <main className=\"auth\">\r\n      <AuthForm\r\n        header=\"Регистрация\"\r\n        buttonText=\"Зарегистрироваться\"\r\n        isFormInvalid={isFormInvalid}\r\n        onSubmit={handleSubmit}\r\n        isLoading={props.isLoading}\r\n      >\r\n        <input\r\n          className=\"auth__input auth__input_content_email\"\r\n          type=\"email\"\r\n          value={email || ''}\r\n          onChange={handleEmailInput}\r\n          placeholder=\"Email\"\r\n          autoComplete=\"off\"\r\n          required\r\n        />\r\n        <span\r\n          className={`auth__input-error ${isValidEmail ? '' : 'auth__input-error_visible'}`}\r\n        >\r\n          {emailValdationMessage}\r\n        </span>\r\n        <input\r\n          className=\"auth__input auth__input_content_password\"\r\n          type=\"password\"\r\n          value={password || ''}\r\n          onChange={handlePasswordInput}\r\n          placeholder=\"Пароль\"\r\n          minLength=\"6\"\r\n          autoComplete=\"off\"\r\n          required\r\n        />\r\n        <span\r\n          className={`auth__input-error ${isValidPassword ? '' : 'auth__input-error_visible'}`}\r\n        >\r\n          {passwordValdationMessage}\r\n        </span>\r\n      </AuthForm>\r\n      <Link className=\"auth__redirect-link\" to=\"/sign-in\">Уже зарегистрированы? Войти</Link>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\n\r\nimport AuthForm from './AuthForm';\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const [isEmptyEmail, setIsEmptyEmail] = React.useState(false);\r\n  const [isEmptyPassword, setIsEmptyPassword] = React.useState(false);\r\n\r\n  function handleEmailInput(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordInput(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    if(email === '') return setIsEmptyEmail(true);\r\n    else setIsEmptyEmail(false);\r\n\r\n    if(password === '') return setIsEmptyPassword(true);\r\n    else setIsEmptyPassword(false);\r\n\r\n    props.handleLogin({\r\n      email: email,\r\n      password: password\r\n    });\r\n  }\r\n\r\n  return (\r\n    <main className=\"auth\">\r\n      <AuthForm\r\n        header=\"Вход\"\r\n        buttonText=\"Войти\"\r\n        onSubmit={handleSubmit}\r\n        isLoading={props.isLoading}\r\n      >\r\n        <input\r\n          className=\"auth__input auth__input_content_email\"\r\n          type=\"email\"\r\n          value={email || ''}\r\n          onChange={handleEmailInput}\r\n          placeholder=\"Email\"\r\n          autoComplete=\"off\"\r\n          required\r\n        />\r\n        <span\r\n          className={`auth__input-error ${!isEmptyEmail ? '' : 'auth__input-error_visible'}`}\r\n        >\r\n          Заполните это поле\r\n        </span>\r\n        <input\r\n          className=\"auth__input auth__input_content_password\"\r\n          type=\"password\"\r\n          value={password || ''}\r\n          onChange={handlePasswordInput}\r\n          placeholder=\"Пароль\"\r\n          autoComplete=\"off\"\r\n          required\r\n        />\r\n        <span\r\n          className={`auth__input-error ${!isEmptyPassword ? '' : 'auth__input-error_visible'}`}\r\n        >\r\n          Заполните это поле\r\n        </span>\r\n      </AuthForm>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Login;","import { Link } from 'react-router-dom';\r\n\r\nfunction Menu(props) {\r\n  return (\r\n    <div className={`menu ${props.mode === 'mobile' ? (props.userInfo && props.isMenuOpen ? 'menu__mode_mobile' : 'menu_hidden') : (props.userInfo ? 'menu__mode_desktop' : '')}`}>\r\n      <p className={`menu__info ${props.mode === 'mobile' ? 'menu__info_mode_mobile' : ''}`}>\r\n        {props.userInfo ? props.userInfo.email : ''}\r\n      </p>\r\n      <Link\r\n        className={`menu__link ${props.userInfo ? 'menu__link_color_grey' : ''} ${props.mode === 'mobile' ? 'menu__link_mode_mobile' : ''}`}\r\n        to={props.redirectLink}\r\n        onClick={props.onRedirect}\r\n      >\r\n        {props.redirectText}\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Menu;","import { Link } from 'react-router-dom';\r\n\r\nimport Menu from './Menu';\r\n\r\nfunction Header(props) {\r\n  return (\r\n    <header className={`header page__header ${props.userInfo ? 'header_mode_mobile' : ''}`}>\r\n      <Menu\r\n        mode=\"mobile\"\r\n        redirectLink={props.redirectLink}\r\n        redirectText={props.redirectText}\r\n        onRedirect={props.onRedirect}\r\n        userInfo={props.userInfo}\r\n        isMenuOpen={props.isMenuOpen}\r\n      />\r\n      <Link className=\"header__logo\" to=\"/\" />\r\n      <Menu\r\n        mode=\"desktop\"\r\n        redirectLink={props.redirectLink}\r\n        redirectText={props.redirectText}\r\n        onRedirect={props.onRedirect}\r\n        userInfo={props.userInfo}\r\n      />\r\n      {props.userInfo && \r\n        <button\r\n          className={`header__menu-button ${props.isMenuOpen ? 'header__menu-button_state_pressed' : ''}`}\r\n          type=\"button\"\r\n          onClick={props.onMenuOpen}\r\n        />}\r\n    </header>\r\n  );\r\n}\r\n\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;","import React from 'react';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isLiked = props.card.likes.some(liked => liked._id === currentUser._id);\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card);\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <img className=\"card__image\" src={props.card.link} alt={props.card.name} onClick={handleClick}/>\r\n      <div className=\"card__content\">\r\n        <h2 className=\"card__title\">{props.card.name}</h2>\r\n        <div>\r\n          <button\r\n            className={`card__like-button ${isLiked ? 'card__like-button_checked' : ''}`}\r\n            type=\"button\"\r\n            aria-label=\"Нравится\"\r\n            onClick={handleLikeClick}\r\n          />\r\n          <p className=\"card__like-counter\">{props.card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n      <button\r\n        className={`card__delete-button ${currentUser._id === props.card.owner._id ? '' : 'card__delete-button_hidden'}`}\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        onClick={handleDeleteClick}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\n\r\nimport Card from './Card';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content page__content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__overlay\" onClick={props.onEditAvatar}>\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <button\r\n            className=\"profile__edit-button\"\r\n            type=\"button\"\r\n            aria-label=\"Редактировать\"\r\n            onClick={props.onEditProfile}\r\n          />\r\n          <p className=\"profile__description\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          className=\"profile__add-button\"\r\n          type=\"button\"\r\n          aria-label=\"Добавить\"\r\n          onClick={props.onAddPlace}\r\n        />\r\n      </section>\r\n      <section className=\"cards\" aria-label=\"Карточки мест\">\r\n        <ul className=\"cards__container\">\r\n          {\r\n            props.cards.map((card) => (\r\n              <li key={card._id}>\r\n                <Card\r\n                  card={card}\r\n                  onCardClick={props.onOpenCard}\r\n                  onCardLike={props.onCardLike}\r\n                  onCardDelete={props.onCardDelete}\r\n                />\r\n              </li>\r\n            ))\r\n          };\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__copyright\">© {currentYear} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import emptyCardPath from '../images/image-empty.png';\r\n\r\nfunction ImagePopup(props) {\r\n  return (\r\n    <div className={`popup popup_mode_image ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__place-container\">\r\n        <figure className=\"popup__place\">\r\n          <img\r\n            className=\"popup__place-image\"\r\n            src={props.card?.link || emptyCardPath}\r\n            alt={props.card?.caption || 'Название места'}\r\n          />\r\n          <figcaption className=\"popup__place-caption\">{props.card?.caption || 'Название места'}</figcaption>\r\n        </figure>\r\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY/j//z8ABf4C/qc1gYQAAAAASUVORK5CYII=\"","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen ? 'popup_opened' : ''}`}> \r\n      <div className=\"popup__container\">\r\n        <h2 className=\"popup__header\">{props.header}</h2>\r\n          <form className=\"popup__form\" onSubmit={props.onSubmit} noValidate>\r\n            {props.children}\r\n            <button\r\n              className={`popup__button ${props.isFormInvalid ? 'popup__button_disabled' : ''}`}\r\n              type=\"submit\"\r\n              disabled={props.isFormInvalid || props.isLoading}\r\n            >\r\n              {props.isLoading ? 'Сохранение...' : props.buttonText}\r\n            </button>\r\n          </form>\r\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  const [isValidName, setIsValidName] = React.useState(true);\r\n  const [isValidDescription, setIsValidDescription] = React.useState(true);\r\n\r\n  const [nameValdationMessage, setNameValdationMessage] = React.useState('');\r\n  const [descriptionValdationMessage, setDescriptionValdationMessage] = React.useState('');\r\n\r\n  const [isFormInvalid, setIsFormInvalid] = React.useState(false);\r\n\r\n  React.useEffect(() => {  \r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n\r\n    setIsValidName(true);\r\n    setIsValidDescription(true);\r\n\r\n    setNameValdationMessage('');\r\n    setDescriptionValdationMessage('');\r\n  }, [props.isOpen, currentUser]);\r\n\r\n  React.useEffect(() => {\r\n    !isValidName || !isValidDescription ? setIsFormInvalid(true) : setIsFormInvalid(false);\r\n  }, [isValidName, isValidDescription]);\r\n\r\n  function handleNameInput(evt) {\r\n    const {value, validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setName(value);\r\n\r\n    setIsValidName(valid);\r\n    setNameValdationMessage(validationMessage);\r\n  }\r\n\r\n  function handleDescriptionInput(evt) {\r\n    const {value, validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setDescription(value);\r\n\r\n    setIsValidDescription(valid);\r\n    setDescriptionValdationMessage(validationMessage);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    props.onUpdateUser({\r\n      name: name,\r\n      description: description\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      header=\"Редактировать профиль\"\r\n      buttonText=\"Сохранить\"\r\n      isFormInvalid={isFormInvalid}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n    >\r\n      <input \r\n        className=\"popup__input popup__input_content_name\"\r\n        type=\"text\"\r\n        value={name || ''}\r\n        onChange={handleNameInput}\r\n        placeholder=\"Имя\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        autoComplete=\"off\"\r\n        required \r\n      />\r\n      <span\r\n        className={`popup__input-error ${isValidName ? '' : 'popup__input-error_visible'}`}\r\n      >\r\n        {nameValdationMessage}\r\n      </span>\r\n      <input\r\n        className=\"popup__input popup__input_content_description\"\r\n        type=\"text\"\r\n        value={description || ''}\r\n        onChange={handleDescriptionInput}\r\n        placeholder=\"О себе\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        autoComplete=\"off\"\r\n        required\r\n      />\r\n      <span\r\n        className={`popup__input-error ${isValidDescription ? '' : 'popup__input-error_visible'}`}\r\n      >\r\n        {descriptionValdationMessage}\r\n      </span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) { \r\n  const inputRef = React.useRef();\r\n\r\n  const [isValidLink, setIsValidLink] = React.useState(false);\r\n  const [linkValdationMessage, setLinkValdationMessage] = React.useState('');\r\n\r\n  const [isFormInvalid, setIsFormInvalid] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    inputRef.current.value = '';\r\n\r\n    setIsValidLink(true);\r\n    setLinkValdationMessage('');\r\n\r\n    setIsFormInvalid(true);\r\n  }, [props.isOpen]);\r\n\r\n  function handleLinkInput(evt) {\r\n    const {validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setIsValidLink(valid);\r\n    setLinkValdationMessage(validationMessage);\r\n    setIsFormInvalid(!valid);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    props.onUpdateAvatar({\r\n      avatarLink: inputRef.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      header=\"Обновить аватар\"\r\n      buttonText=\"Сохранить\"\r\n      isFormInvalid={isFormInvalid}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n    >\r\n      <input\r\n        className=\"popup__input popup__input_content_avatar\"\r\n        type=\"url\"\r\n        ref={inputRef}\r\n        onChange={handleLinkInput}\r\n        placeholder=\"Ссылка на аватар\"\r\n        autoComplete=\"off\"\r\n        required\r\n      />\r\n      <span\r\n        className={`popup__input-error ${isValidLink ? '' : 'popup__input-error_visible'}`}\r\n      >\r\n        {linkValdationMessage}\r\n      </span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [title, setTitle] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  const [isValidTitle, setIsValidTitle] = React.useState(false);\r\n  const [isValidLink, setIsValidLink] = React.useState(false);\r\n\r\n  const [titleValdationMessage, setTitleValdationMessage] = React.useState('');\r\n  const [linkValdationMessage, setLinkValdationMessage] = React.useState('');\r\n\r\n  const [isFormInvalid, setIsFormInvalid] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    setTitle('');\r\n    setLink('');\r\n    \r\n    setIsValidTitle(false);\r\n    setIsValidLink(false);\r\n\r\n    setTitleValdationMessage('');\r\n    setLinkValdationMessage('');\r\n  }, [props.isOpen]);\r\n\r\n  React.useEffect(() => {\r\n    !isValidTitle || !isValidLink ? setIsFormInvalid(true) : setIsFormInvalid(false);\r\n  }, [isValidTitle, isValidLink]);\r\n\r\n  function handleTitleInput(evt) {\r\n    const {value, validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setTitle(value);\r\n\r\n    setIsValidTitle(valid);\r\n    setTitleValdationMessage(validationMessage);\r\n  }\r\n\r\n  function handleLinkInput(evt) {\r\n    const {value, validity: {valid}, validationMessage} = evt.target;\r\n\r\n    setLink(value);\r\n\r\n    setIsValidLink(valid);\r\n    setLinkValdationMessage(validationMessage);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    props.onAddPlace({\r\n      title: title,\r\n      link: link\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      header=\"Новое место\"\r\n      buttonText=\"Создать\"\r\n      isFormInvalid={isFormInvalid}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n    >\r\n      <input\r\n        className=\"popup__input popup__input_content_title\"\r\n        type=\"text\"\r\n        value={title || ''}\r\n        onChange={handleTitleInput}\r\n        placeholder=\"Название\"\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        autoComplete=\"off\"\r\n        required\r\n      />\r\n      <span\r\n        className={`popup__input-error ${isValidTitle ? '' : 'popup__input-error_visible'}`}\r\n      >\r\n        {titleValdationMessage}\r\n      </span>\r\n      <input\r\n        className=\"popup__input popup__input_content_link\"\r\n        type=\"url\"\r\n        value={link || ''}\r\n        onChange={handleLinkInput}\r\n        placeholder=\"Ссылка на картинку\"\r\n        autoComplete=\"off\"\r\n        required\r\n      />\r\n      <span\r\n        className={`popup__input-error ${isValidLink ? '' : 'popup__input-error_visible'}`}\r\n      >\r\n        {linkValdationMessage}\r\n      </span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","function InfoToolTipPopup(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__container\">\r\n        <div\r\n          className={`popup__image ${props.isRegistered ? 'popup__image_type_success' : 'popup__image_type_failed'}`}\r\n        />\r\n        <h2 className=\"popup__header popup__header_mode_info\">\r\n          {props.isRegistered ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте ещё раз.\"}\r\n        </h2>\r\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoToolTipPopup;","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._cohort = options.cohort;\r\n    this._token = options.token;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) return res.json();\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      }\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  updateProfile(name, description) {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: description\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  updateAvatar(avatar) {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: avatar\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      }\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  addCard(name, link) {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      }\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, method) {\r\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/likes/${cardId}`, {\r\n      method: method,\r\n      headers: {\r\n        authorization: this._token,\r\n        'content-type': 'application/json'\r\n      }\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1',\r\n  cohort: 'cohort-21',\r\n  token: 'e0650d2e-cc1d-4b7b-999a-f7cf471dfca5'\r\n});\r\n\r\nexport default api;","class AuthApi {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) return res.json();\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  register({email, password}) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\" \r\n      },\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  authorize({password, email}) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\" \r\n      },\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n  \r\n  getContent(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${token}`\r\n      }\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst authApi = new AuthApi({\r\n  baseUrl: 'https://auth.nomoreparties.co'\r\n});\r\n\r\nexport default authApi;","import React from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\n\r\nimport ProtectedRoute from './ProtectedRoute';\r\n\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\n\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport InfoToolTipPopup from './InfoToolTipPopup';\r\n\r\nimport api from '../utils/api';\r\nimport authApi from '../utils/authApi';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport IsLoggedInContext from '../contexts/IsLoggedInContext';\r\n\r\nfunction App() {\r\n  const [isRegistered, setIsRegistered] = React.useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\r\n  const [userInfo, setUserInfo] = React.useState({});\r\n\r\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\r\n\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isInfoToolTipPopupOpen, setIsInfoToolTipPopupOpen] = React.useState(false);\r\n\r\n  const [currentUser, setCurrentUser] = React.useState({}); \r\n\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isCardSelected, setIsCardSelected] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    if(token) {\r\n      authApi.getContent(token).then(user => {\r\n        setUserInfo({\r\n          email: user.data.email\r\n        });\r\n        \r\n        setIsLoggedIn(true);\r\n        history.push(\"/\");\r\n        \r\n        console.log('Авторизация прошла успешно!');\r\n      }).catch(err => {\r\n        console.log(`${err}. Не удалось авторизоваться.`);\r\n      });\r\n    }\r\n    \r\n    return () => setUserInfo({});\r\n  }, [history]);\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards().then(cards => {  \r\n      setCards(cards);\r\n    \r\n      console.log('Карточки получены!');\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось получить карточки с сервера.`);\r\n    });\r\n\r\n    return () => setCards([]);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    api.getUserInfo().then(user => {\r\n      setCurrentUser(user);\r\n\r\n      console.log('Данные профиля получены!');\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось получить данные о профиле с сервера.`);\r\n    });\r\n\r\n    return () => {\r\n      setCurrentUser({});\r\n    };\r\n  }, []);\r\n\r\n  function handleRegister({email, password}) {\r\n    setIsLoading(true);\r\n\r\n    authApi.register({email, password}).then(data => {\r\n      setIsRegistered(true);\r\n      history.push(\"/sign-in\");\r\n\r\n      console.log('Регистрация прошла успешно! Введите логин и пароль для входа в аккаунт.');\r\n    }).catch(err => {\r\n      setIsRegistered(false);\r\n\r\n      console.log(`${err}. Не удалось зарегистрироваться. Попробуйте еще раз.`);\r\n    }).finally(() => {\r\n      setIsInfoToolTipPopupOpen(true);\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n\r\n  function handleLogin({email, password}) {\r\n    setIsLoading(true);\r\n    \r\n    authApi.authorize({email, password}).then(data => {\r\n      setUserInfo({\r\n        email: email\r\n      });\r\n      \r\n      setIsLoggedIn(true);\r\n      history.push(\"/\");\r\n      localStorage.setItem('token', data.token);\r\n\r\n      console.log('Авторизация прошла успешно!');\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось авторизоваться.`);\r\n    }).finally(() => {\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n\r\n  function handleSignOut() {\r\n    setIsLoggedIn(false);\r\n    localStorage.removeItem('token');\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(liked => liked._id === currentUser._id);\r\n\r\n    api.changeLikeCardStatus(card._id, isLiked ? 'DELETE' : 'PUT').then(updatedCard => {\r\n      setCards((cards) => cards.map(c => c._id === card._id ? updatedCard : c));\r\n      console.log('Состояние лайка изменено!');\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось изменить состояние лайка.`);\r\n    });\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setIsCardSelected(true);\r\n\r\n    setSelectedCard({\r\n      caption: card.name,\r\n      link: card.link\r\n    });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(message => {\r\n      setCards((cards) => cards.filter(c => c._id !== card._id));\r\n      console.log('Карточка успешно удалена!');\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось удалить карточку с сервера.`);\r\n    });\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsInfoToolTipPopupOpen(false);\r\n\r\n    setIsCardSelected(false);\r\n    setSelectedCard({});\r\n  }\r\n\r\n  function handleMenuButtonClick() {\r\n    setIsMenuOpen((isMenuOpen) => !isMenuOpen);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleUpdateUser({name, description}) {\r\n    setIsLoading(true);\r\n\r\n    api.updateProfile(name, description).then(updatedUser => {\r\n      setCurrentUser(updatedUser);\r\n      console.log('Профиль успешно обновлён!');\r\n      closeAllPopups();\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось обновить профиль.`);\r\n    }).finally(() => {\r\n      setIsLoading(false);\r\n    }); ;\r\n  }\r\n\r\n  function handleUpdateAvatar({avatarLink}) {\r\n    setIsLoading(true);\r\n\r\n    api.updateAvatar(avatarLink).then(updatedUser => {\r\n      setCurrentUser(updatedUser);\r\n      console.log('Аватар успешно обновлён!');\r\n      closeAllPopups();\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось обновить аватар.`);\r\n    }).finally(() => {\r\n      setIsLoading(false);\r\n    });  \r\n  }\r\n\r\n  function handleAddPlace({title, link}) {\r\n    setIsLoading(true);\r\n\r\n    api.addCard(title, link).then(params => {\r\n      setCards([params, ...cards]);\r\n      console.log('Карточка успешно добавлена!');\r\n      closeAllPopups();\r\n    }).catch(err => {\r\n      console.log(`${err}. Не удалось разместить карточку.`)\r\n    }).finally(() => {\r\n      setIsLoading(false);\r\n    }); ;\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <IsLoggedInContext.Provider value={isLoggedIn}>\r\n        <div className=\"page\">\r\n          <div className=\"page__container\">\r\n            <Switch>\r\n              <Route path=\"/sign-up\">\r\n                <Header\r\n                  redirectLink=\"/sign-in\"\r\n                  redirectText=\"Войти\"\r\n                />\r\n                <Register onRegister={handleRegister} isLoading={isLoading} />\r\n              </Route>\r\n              <Route path=\"/sign-in\">\r\n                <Header\r\n                  redirectLink=\"/sign-up\"\r\n                  redirectText=\"Регистрация\"\r\n                />\r\n                <Login handleLogin={handleLogin} isLoading={isLoading} />\r\n              </Route>\r\n              <ProtectedRoute path=\"/\">\r\n                <Header\r\n                  redirectLink=\"/\"\r\n                  redirectText=\"Выйти\"\r\n                  onRedirect={handleSignOut}\r\n                  userInfo={userInfo}\r\n                  isMenuOpen={isMenuOpen}\r\n                  onMenuOpen={handleMenuButtonClick}\r\n                />\r\n                <Main\r\n                  onEditAvatar={handleEditAvatarClick}\r\n                  onEditProfile={handleEditProfileClick}\r\n                  onAddPlace={handleAddPlaceClick}\r\n                  onOpenCard={handleCardClick}\r\n                  onCardLike={handleCardLike}\r\n                  onCardDelete={handleCardDelete}\r\n                  cards={cards}\r\n                />\r\n                <Footer />\r\n              </ProtectedRoute>\r\n            </Switch>\r\n            <EditAvatarPopup\r\n              isOpen={isEditAvatarPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n              isLoading={isLoading}\r\n            />\r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n              isLoading={isLoading}\r\n            />\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlace}\r\n              isLoading={isLoading}\r\n            />\r\n            <ImagePopup card={selectedCard} isOpen={isCardSelected} onClose={closeAllPopups} />\r\n            <InfoToolTipPopup\r\n              isOpen={isInfoToolTipPopupOpen}\r\n              onClose={closeAllPopups}\r\n              isRegistered={isRegistered}\r\n            />\r\n          </div> \r\n        </div>\r\n      </IsLoggedInContext.Provider>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\n\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}